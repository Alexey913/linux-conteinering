# linux-conteinering

* * *
# [Курс Контейнеризация](#контейнеризация)
* * *

# Операционные системы и виртуализация (Linux)

## [Семинар 1 - Установка ОС Ubuntu в виртуальной машине. Работа в SSH-клиенте]
1. Установить Ubuntu Desktop 22.04 в виртуальную машину.
2. Установить гостевые дополнения ОС.
3. Установить Midnight Commander.
4. Установить SSH-соединение с виртуальной машиной из хостовой.

## [Семинар 2 - Урок 2. Работа с файлами и ссылками](linux/seminar_2.md)
1. Используя команду cat, создать два файла с данными, а затем объединить их. Просмотреть содержимое созданного файла. Переименовать файл, дав ему новое имя.
Создать несколько файлов. Создать директорию, переместить файл туда. Удалить все созданные в этом и предыдущем задании директории и файлы.
Создать файл file1 и наполнить его произвольным содержимым. Скопировать его в file2. Создать символическую ссылку file3 на file1. Создать жесткую ссылку file4 на file1. Посмотреть, какие айноды у файлов. Удалить file1. Что стало с остальными созданными файлами? Попробовать вывести их на экран.
Дать созданным файлам другие, произвольные имена. Создать новую символическую ссылку. Переместить ссылки в другую директорию.
## [Семинар 3 - Права доступа и безопасность](linux/seminar_3.md)
1. Создать два произвольных файла. Первому присвоить права на чтение и запись для владельца и группы, только на чтение — для всех. Второму присвоить права на чтение и запись только для владельца. Сделать это в численном и символьном виде.
2. Назначить новых владельца и группу для директории целиком.
3. Управление пользователями:
* создать пользователя, используя утилиту useradd и adduser;
* удалить пользователя, используя утилиту userdel.
4. Управление группами:
* создать группу с использованием утилит groupadd и addgroup;
* попрактиковаться в смене групп у пользователей;
* добавить пользователя в группу, не меняя основной;
5. Создать пользователя с правами суперпользователя. Сделать так, чтобы sudo не требовал пароль для выполнения команд.
6. Дополнительные (необязательные) задания:
* Используя дополнительные материалы, выдать одному из созданных пользователей право на выполнение ряда команд, требующих прав суперпользователя (команды выбираем на своё усмотрение).
* Создать группу developer и нескольких пользователей, входящих в неё. Создать директорию для совместной работы. Сделать так, чтобы созданные одними пользователями файлы могли изменять другие пользователи этой группы.
* Создать в директории для совместной работы поддиректорию для обмена файлами, но чтобы удалять файлы могли только их создатели.
* Создать директорию, в которой есть несколько файлов. Сделать так, чтобы открыть файлы можно было, только зная имя файла, а через ls список файлов посмотреть было нельзя.

## [Семинар 4 - Подключение сторонних репозиториев, ручная установка пакетов](linux/seminar_4.md)
1. Подключить дополнительный репозиторий на выбор: Docker, Nginx, Oracle MySQL. Установить любой пакет из этого репозитория.
2. Установить и удалить deb-пакет с помощью dpkg.
3. Установить и удалить snap-пакет.
4. Добавить задачу для выполнения каждые 3 минуты (создание директории, запись в файл).
5. * Подключить PPA-репозиторий на выбор. Установить из него пакет. Удалить PPA из системы.
6. * Создать задачу резервного копирования (tar) домашнего каталога пользователя. Реализовать с использованием пользовательских crontab-файлов.

## [Семинар 5 - Настройка сети в Linux. Работа с IPtables](linux/seminar_5.md)
* Настроить статическую конфигурацию (без DHCP) в Ubuntu через ip и netplan. Настроить IP, маршрут по умолчанию и DNS-сервера (1.1.1.1 и 8.8.8.8). Проверить работоспособность сети.
* Настроить правила iptables для доступности сервисов на TCP-портах 22, 80 и 443. Также сервер должен иметь возможность устанавливать подключения к серверу обновлений. Остальные подключения запретить.
* Запретить любой входящий трафик с IP 3.4.5.6.
* * Запросы на порт 8090 перенаправлять на порт 80 (на этом же сервере).
* * Разрешить подключение по SSH только из сети 192.168.0.0/24.

## [Семинар 6 - Запуск стека для веб-приложения](linux/seminar_6.md)
* Установить Nginx и настроить его на работу с PHP-FPM.
* Установить Apache. Настроить обработку PHP. Добиться одновременной работы с Nginx.
* Настроить схему обратного прокси для Nginx (динамика - на Apache).
* Установить MySQL. Создать новую базу данных и таблицу в ней.
* * Установить пакет phpmyadmin и запустить его веб-интерфейс для управления MySQL.
* * Настроить схему балансировки трафика между несколькими серверами Apache на стороне Nginx с помощью модуля ngx_http_upstream_module.

## [Семинар 7 - Запуск веб-приложения из контейнеров](linux/seminar_7.md)
Установить в виртуальную машину или VDS Docker, настроить набор контейнеров через docker compose по инструкции по ссылке: https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-with-docker-compose-ru. Часть с настройкой certbot и HTTPS опустить, если у вас нет настоящего домена и белого IP.
* Запустить два контейнера, связанные одной сетью (используя документацию). Первый контейнер БД (например, образ mariadb:10.8), второй контейнер — phpmyadmin. Получить доступ к БД в первом контейнере через второй контейнер (веб-интерфейс phpmyadmin).

## [Семинар 8 - Скрипты Bash]
### [Задание 1](linux/delete_files.sh)
Написать скрипт очистки директорий. На вход принимает путь к директории. Если директория существует, то удаляет в ней все файлы с расширениями .bak, .tmp, .backup. Если директории нет, то выводит ошибку.
### [Задание 2](linux/ownersort.sh)
* Создать скрипт ownersort.sh, который в заданной папке копирует файлы в директории, названные по имени владельца каждого файла. Учтите, что файл должен принадлежать соответствующему владельцу.

* * *
# [Курс Операционные системы и виртуализация (Linux)](#операционные-системы-и-виртуализация-(linux))
* * *

# Контейнеризация

## Семинар 1 - Механизмы пространства имен
### Задание
Необходимо продемонстрировать изоляцию одного и того же приложения (командного интерпретатора) в различных пространствах имен.
### [Решение](conteiniring/homework_1.md)

## Семинар 2 - Механизмы контрольных групп

### Задание 1
* запустить контейнер с ubuntu, используя механизм LXC
* ограничить контейнер 256 Мб ОЗУ и проверить, что ограничение работает
* добавить автозапуск контейнеру, перезагрузить ОС и убедиться, что контейнер действительно запустился самостоятельно
* при создании указать файл, куда записывать логи
* после перезагрузки проанализировать логи

### Задание 2
настроить автоматическую маршрутизацию между контейнерами. Адреса можно взять: 10.0.12.0/24 и 10.0.13.0/24.
### [Решение](conteiniring/homework_2.md)

## Семинар 3 - Введение в Docker
### Задание
* запустить контейнер с БД, отличной от mariaDB, используя инструкции на сайте: https://hub.docker.com/
* добавить в контейнер hostname такой же, как hostname системы через переменную
* заполнить БД данными через консоль
* запустить phpmyadmin (в контейнере) и через веб проверить, что все введенные данные доступны
### [Решение](conteiniring/homework_3.md)

## Семинар 4 - Dockerfile и слои
### Задание
Необходимо создать Dockerfile, основанный на любом образе (вы в праве выбрать самостоятельно). В него необходимо поместить приложение, написанное на любом известном вам языке программирования (Python, Java, C, С#, C++). При запуске контейнера должно запускаться самостоятельно написанное приложение.

### [Решение](conteiniring/homework_4.md)

## Семинар 5 - Docker Compose и Docker Swarm
### Задание 1
* создать сервис, состоящий из 2 различных контейнеров: 1 - веб, 2 - БД
* далее необходимо создать 3 сервиса в каждом окружении (dev, prod, lab)
* по итогу на каждой ноде должно быть по 2 работающих контейнера
* выводы зафиксировать

### Задание 2
* нужно создать 2 ДК-файла, в которых будут описываться сервисы
* повторить задание 1 для двух окружений: lab, dev
* обязательно проверить и зафиксировать результаты, чтобы можно было выслать преподавателю для проверки

### [Решение](conteiniring/homework_5.md)
